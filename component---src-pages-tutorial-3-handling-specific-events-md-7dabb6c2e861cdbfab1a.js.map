{"version":3,"file":"component---src-pages-tutorial-3-handling-specific-events-md-7dabb6c2e861cdbfab1a.js","mappings":"2SAOaA,EAAe,CAAC,EACvBC,EAAc,CAClBD,aAAAA,GAEIE,EAAYC,EAAAA,EACH,SAASC,EAAW,GAGhC,IAFDC,EAAU,EAAVA,WACGC,GAAK,YAER,OAAO,SAACJ,GAAS,UAAKD,EAAiBK,EAAK,CAAED,WAAYA,EAAYE,QAAQ,eAI5E,eACE,GAAM,8CAA4C,+CAEpD,iCAAkB,cAAGC,WAAW,IAC5B,KAAQ,wBAAsB,UACf,ySAAyS,uBAAYA,WAAW,KAAG,SAAuB,SAAS,uBAAYA,WAAW,KAAG,+BAA6C,6CAA6C,cAAGA,WAAW,IACpf,KAAQ,6DAA2D,oBAC1C,sJAC7B,eACE,GAAM,wBAAsB,yBAE9B,kCAAmB,uBAAYA,WAAW,KAAG,YAA0B,2BACvE,qBAAK,iBAAMA,WAAW,MAClB,UAAa,uBAAqB,0sBAsBtC,2FAA4E,uBAAYA,WAAW,KAAG,kCAAgD,qBACtJ,eACE,GAAM,+BAA6B,gCAErC,iPAAkO,cAAGC,KAAK,+CAA+CC,OAAO,QAAM,2BAAgC,iCACtU,4NACA,SAAC,IAAM,CAACC,YAAY,wCAAwCJ,QAAQ,YACpE,eACE,GAAM,aAAW,cAEnB,gGAAiF,cAAGC,WAAW,IAC3F,KAAQ,gCAA8B,UACvB,KAGvB,CAEAJ,EAAWQ,gBAAiB,C","sources":["webpack://cloudmanager-api-docs/./src/pages/tutorial/3-handling-specific-events.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/cloudmanager-api-docs/cloudmanager-api-docs/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nimport Glitch from \"../../components/glitch\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n\n    <h1 {...{\n      \"id\": \"tutorial-step-3---handling-specific-events\"\n    }}>{`Tutorial Step 3 - Handling Specific Events`}</h1>\n    <p>{`As seen in `}<a parentName=\"p\" {...{\n        \"href\": \"1-a-basic-webhook.md\"\n      }}>{`Step 1`}</a>{`, webhooks can be registered for one or more events. Depending on the type of integration you are actually building with Cloud Manager, you will end up with a single webhook script which can handle multiple events in different ways. The event can be identified by using the combination of the `}<inlineCode parentName=\"p\">{`@type`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`xdmEventEnvelope:objectType`}</inlineCode>{` values. A full list can be found on the `}<a parentName=\"p\" {...{\n        \"href\": \"/cloudmanager-api-docs/guides/api-usage/receiving-events/\"\n      }}>{`Receiving Events`}</a>{` page. For this step in the tutorial, you're going to add a simple log statement when event being received is a Pipeline Execution Started event.`}</p>\n    <h2 {...{\n      \"id\": \"updating-the-webhook\"\n    }}>{`Updating the Webhook`}</h2>\n    <p>{`Replace the `}<inlineCode parentName=\"p\">{`app.post`}</inlineCode>{` block with this code:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`app.post('/webhook', (req, res) => {\n  if (process.env.CLIENT_ID !== req.body.recipient_client_id) {\n    console.warn(\\`Unexpected client id. Was expecting \\${process.env.CLIENT_ID} and received \\${req.body.recipient_client_id}\\`)\n    res.status(400)\n    res.end()\n    return\n  }\n  res.set('Content-Type', 'text/plain')\n  res.send('pong')\n\n  const STARTED = 'https://ns.adobe.com/experience/cloudmanager/event/started'\n  const EXECUTION = 'https://ns.adobe.com/experience/cloudmanager/pipeline-execution'\n\n  const event = req.body.event\n\n  if (STARTED === event['@type'] &&\n       EXECUTION === event['xdmEventEnvelope:objectType']) {\n    console.log('received execution start event')\n  }\n})\n`}</code></pre>\n    <p>{`Now when a Pipeline Execution Started event is received, the message `}<inlineCode parentName=\"p\">{`received execution start event`}</inlineCode>{` will be logged.`}</p>\n    <h2 {...{\n      \"id\": \"running-the-updated-webhook\"\n    }}>{`Running the Updated Webhook`}</h2>\n    <p>{`If you are running the script locally, you'll need to stop and restart the node process. You don't need to restart ngrok. In fact, if you do restart ngrok, the URL will likely change and you'll need to go back into the `}<a href=\"https://developer.adobe.com/console/projects\" target=\"_new\">{`Adobe Developer Console`}</a>{` and update the Webhook URL.`}</p>\n    <p>{`If you are running the script through Glitch, Glitch will restart automatically. If you don't want to update your existing Glitch project (or lost it), you can click the button below to start over.`}</p>\n    <Glitch projectName=\"adobe-cloudmanager-api-tutorial-step3\" mdxType=\"Glitch\" />\n    <h2 {...{\n      \"id\": \"next-step\"\n    }}>{`Next Step`}</h2>\n    <p>{`With all that done, you're ready to proceed to the next step. Continue to `}<a parentName=\"p\" {...{\n        \"href\": \"4-getting-an-access-token.md\"\n      }}>{`Step 4`}</a>{`.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","href","target","projectName","isMDXComponent"],"sourceRoot":""}